# 1. indexer 포트 정보

스플렁크 인스턴스 별 사용하는 기본 port는 아래와 같다.

![splunk_default_port](https://user-images.githubusercontent.com/6319057/47469200-9a1b8e00-d83a-11e8-85c0-0dd1a67c81e0.PNG)

테스트 용도의 포트 정보는 아래와 같다.

인스턴스|용도|포트|비고
---- | ---- | ---- | ----
idx_1|web port|8000|
----|mgmt port|8089|
----|appserver port|8065|
----|kvstore port|8191|
idx_2|web port|8000|
----|mgmt port|8089|
----|appserver port|8065|
----|kvstore port|8191|
idx_3|web port|8000|
----|mgmt port|8089|
----|appserver port|8065|
----|kvstore port|8191|

# 2. indexer cluster 설정
## 2.1. 기본 개념

![splunk_indexer_cluster_base](https://user-images.githubusercontent.com/6319057/47469778-a9500b00-d83d-11e8-9e21-01238b8f00ba.PNG)

인덱서 클러스터는 서로의 데이터를 복제하도록 구성된 인덱서 그룹이다. 클러스터에 포함된 인스턴스간에 데이터의 복사본을 서로 유지하며, 이를 인덱스 복제라고 한다. 데이터를 복제하여 데이터 손실을 방지하고 검색을 위한 데이터 가용성을 향상시킨다.

- 마스터 노드  
클러스터를 관리하는 역할을 함. 피어 노드 간에 복제를 조정하고 검색헤드에 데이터를 찾을 위치를 알려준다. 또한 피어 노드의 구성을 관리하며 피어가 중단된 경우의 작업을 관리한다.
- 피어 노드  
클러스터를 구성하는 인스턴스임. 피어 노드는 다른 노드의 데이터 사본을 동시에 저장하면서 자신의 수신 데이터를 인덱싱할 수 있다. 최소한 복제 팩터(replication factor)만큼의 피어 노드가 있어야 함. 즉, 복제 팩터가 3을 지원하려면 최소한 3개의 피어 노드가 있어야 한다.

## 2.2. 클러스터 이점
- Data availability(데이터 가용성)  
인덱서는 들어오는 데이터를 처리할 수 있으며 인덱싱된 데이터는 검색할 수 있다.
- Data fidelity(데이터 충실도)  
클러스터에 전송된 데이터와 이 데이터가 인덱싱된 이후와 정확히 일치한다.
- Data recovery(데이터 복구)  
인덱서가 다운되더라도 다른 인덱서에서 데이터 손실 없이 액세스 가능하다.
- Disaster recovery(재해 복구)  
멀티사이트 클러스터링을 사용하면 시스템이 전체 데이터 센터의 장애를 견딜 수 있다.
